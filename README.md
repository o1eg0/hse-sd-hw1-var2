[![License](https://img.shields.io/badge/license-BSD--3--Clause-blue.svg)](https://github.com/o1eg0/hse-sd-hw1-var2/blob/main/LICENSE)
[![Python version](https://img.shields.io/badge/Python-3.13-blue)](https://www.python.org/downloads/)


# Домашнее задание SD 9)

<a href="./docs/entities.md">Сущности</a> | <a href="./docs/architecture">ADR-ки</a> | <a href="./docs/volume-calculation.md">Оценка объема</a> | <a href="./docs/fr_nfr.md">FR/NFR</a>

## Задание

Требуется на основе имеющейся заготовки спроектировать и реализовать подходящую архитектуру с учетом требований из [таблички](https://docs.google.com/spreadsheets/d/166tc7e-_QA5blCTfelusi484pzfu-Kkr9-9fbgeSE0s).

Подробнее: [Гугл документ](https://docs.google.com/document/d/13lFO-i7fgXxOF7auxb0FzIDUVv3ZksF1fuzAP3ZYaio/edit)

## Описание

Приложение для аренды пауэрбанка.

В нем разместилось всего три метода:
- Создание оффера
- Создание заказа и извлечение пауэрбанка
- Возврат пауэрбанка

Основная логика приложения находится в main.py:
- Содержит основные функции бизнес-логики для работы с сущностями.
- Использует словари в памяти как “базу данных” с индексами.
- Содержит тестовые сценарии.

В data_requests.py реализованы функции для получения данных из внешних сервисов через HTTP-запросы. Использует библиотеку requests для HTTP-коммуникации.

Модели данных в models.py определяют объекты передачи данных (DTO).

Заглушки API. В fastapi_stubs.py реализован сервер FastAPI с эндпоинтами, имитирующими внешние сервисы. В эти сервисы поступают запросы из data_requests.py.

## Параметры

1. `X = 100` – число одновременно создаваемых заказов -- внешняя нагрузка. Измеряется в RPS.
2. `Y = 50` – сколько раз пользователь просматривал информацию об аренде в приложении. Число показов в среднем на одну аренду.
3. `Z = 1кб` – размер записи об аренде в базе. Измеряется в байтах.

`Storage requirements` - 1 год

Источники данных:
- stations - Станции
- tariffs - Тарифы
- users – Пользователи
- configs – Конфигурация

Есть также неридонли сервисы payments - Платежи.

Кроме того, stations не только предоставляет информацию о станциях, но и занимается выдачей банок.


## Расширение функционала

- Контролировать свежесть оффера
- Ручка с информацией об аренде и текущей накопленной стоимостью
- Запустить зарубежье! Разметить станции странами, в тарифах указать валюту. Реализовать "очистку" (удаление из БД) заказов старше 1 года, с настройкой периода хранения по стране заказа

Критичные источники:
- stations, payments

Некритичные:
- config – реализовать кэш, обновляемый каждую минуту
- tariffs – реализовать (взять готовый) LRU-кэш. Данные старше 10 минут считать невалидными (кидать ошибку). 10 минут настраивать конфигом
- users – реализовать фоллбэк. Давать жадный прайсинг.
