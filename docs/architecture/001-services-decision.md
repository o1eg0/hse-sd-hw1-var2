# ADR-001: Решения по архитектуре сервисов (Draft)

> Статус: Draft \
> Команда: 9 \
> Дата: 2025-10-17

## Контекст

- Требуется спроектировать и реализовать архитектуру, выдерживающую X=100 RPS на создание заказа, Y=50 просмотров информации об аренде на одну аренду, Z≈1 КБ запись.

- Критичные источники: stations, payments. Некритичные: tariffs, users, config.

- Обязательны идемпотентность, контроль свежести оффера, ручка текущей накопленной стоимости, мультистраны и валюты, очистка заказов старше 1 года с политикой по стране.

- NFR: предсказуемая деградация при сбоях некритичных источников, наблюдаемость, хранение ≥1 года, инструментируемый деплой.

## Решения

### Сервисы
- Боевые: rental, pricing, cleanup-worker.
- Моки: stations, payments, tariffs, users, config - отдельный контейнер, с контрактами и возможностью инжектить ошибки/задержки.

### Хранилища
- Хранилища: PostgreSQL, Redis
- Деплой: Docker + docker-compose локально, миграции alembic

## Последствия.

Чёткая граница для тестов/нагрузки; можно эволюционировать моки в реальные интеграции без изменений ядра.